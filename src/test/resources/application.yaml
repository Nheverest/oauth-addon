#
# Copyright Â© 2013-2019, The SeedStack authors <http://seedstack.org>
#
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.
#

rest:
  path: /api

security:
  realms: OAuthRealm
  web:
    urls:
    - pattern: /api/provider/**
      filters: anon
    - pattern: /callback
      filters: oauthCallback
    - pattern: /profile.html
      filters: oauth
    - pattern: /api/**
      filters: oauth
  oauth:
    redirect: ${runtime.web.baseUrl}/callback
    clientId: testClientId
    clientSecret: testClientSecret
    scopes: email
    accessTokenValidator: org.seedstack.oauth.fixtures.TestAccessTokenValidator
    provider:
      authorization: ${runtime.web.baseUrl}/api/provider/authorize
      token: ${runtime.web.baseUrl}/api/provider/create-token
      revocation: ${runtime.web.baseUrl}/api/provider/token/revoke
    openIdConnect:
      issuer: https://mockedserver.com
      jwks: ${runtime.web.baseUrl}/JWKset.json
      userInfo: ${runtime.web.baseUrl}/api/provider/userInfo
      unsecuredTokenAllowed: false

security<noProvider>:
